=begin

	This script exists to backup several primary files used by lich.

	Need to add a way to add and remove files to backup.

	Possible future addition may include the ability to upload the backup to another source.


	Author: Richard A. Secor (rsecor@rsecor.com) AKA Jahadeem
	Author Website: https://www.jahadeem.com
	Version: 0.0.1
	Date Created: 2019-09-14
	Date Updated: 2019-09-14

	0.0.1 (2019-09-14): 
		Initial Version

=end

require 'fileutils'

output = ""
backupFiles = [ 'alias.db3' , 'entry.dat' , 'lich.db3' ]

# Check to see if this script is being ran on startup 
if ( script.vars[ 1 ].downcase == 'help' )
	output.concat "This script exists to backup several primary files used by lich.\n"
	output.concat "Currenly it only backs up: alias.db3, entry.dat, and lich.db3\n"
	output.concat "This script requires trust\n"
	output.concat "\n"
	output.concat "usage:\n"
	output.concat "\n"
	output.concat "   #{$clean_lich_char}#{script.name} backup      Change to the page # of an item in your hands.\n"
	output.concat "   #{$clean_lich_char}#{script.name} help	Backup Files\n" 
	output.concat "\n"
	respond output
	exit
else
	# backup
	# "#{$lich_dir}data/inv.db3"	
	backupFiles.each do |file|
		fullfile = "#{$lich_dir}data/#{file}"
		backupTime = Time.new.strftime("%Y%m%d-%H%M%S")
		backupfullfile = "#{$lich_dir}data/#{file}.#{backupTime}"
		puts "Copying #{fullfile} to #{backupfullfile}"
		FileUtils.copy_file(fullfile,backupfullfile)
	end
end

exit 
